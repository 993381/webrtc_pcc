
CMAKE_MINIMUM_REQUIRED(VERSION 3.9)

PROJECT(PccTest)

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/../)

AUX_SOURCE_DIRECTORY(${PROJECT_SOURCE_DIR}/../modules/congestion_controller/pcc PCC_SOURCES)
AUX_SOURCE_DIRECTORY(${PROJECT_SOURCE_DIR}/../test TEST_SOURCES)
AUX_SOURCE_DIRECTORY(${PROJECT_SOURCE_DIR}/../api/units API_UNITS_SOURCES)
AUX_SOURCE_DIRECTORY(${PROJECT_SOURCE_DIR}/../api/transport API_TRANSPORT_SOURCES)
AUX_SOURCE_DIRECTORY(${PROJECT_SOURCE_DIR}/../rtc_base RTCBASE_SOURCES)

ADD_DEFINITIONS(-D__native_client__)

if (CMAKE_SYSTEM_NAME MATCHES "Darwin")
  ADD_DEFINITIONS(-DWEBRTC_POSIX -DWEBRTC_MAC)
endif (CMAKE_SYSTEM_NAME MATCHS "Darwin")

ADD_EXECUTABLE(pccTest ${PCC_SOURCES} ${API_UNITS_SOURCES} ${API_TRANSPORT_SOURCES} ${RTCBASE_SOURCES} ${TEST_SOURCES})

TARGET_COMPILE_FEATURES(pccTest PUBLIC cxx_std_17)